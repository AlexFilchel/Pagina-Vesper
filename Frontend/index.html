<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vesper - Tienda Online</title>
  <link rel="stylesheet" href="style.css"> <!-- Aquí enlazas tu CSS -->
</head>
<body>

  <!-- Banner superior -->
  <div class="top-banner">
    <p>💳 6 cuotas sin interés a partir de $30.000 &nbsp; 🚚 Envío gratis en compras superiores a $50.000 &nbsp; 💰 20% OFF pagando por transferencia</p>
  </div>

  <div class="container">

  <!-- Header -->
  <header class="main-header">
    <div class="header-top">
      <div class="logo">Vesper</div>
      <div class="search-bar">
        <input type="text" id="search-input" placeholder="Descubrí perfumes, marcas...">
        <button id="search-btn" aria-label="Buscar">
          <span class="icon">🔍</span>
        </button>
      </div>
      <div class="header-actions">
        <a href="#" class="header-action" id="link-cuenta">
          <span class="icon" aria-hidden="true">👤</span>
          <span class="label">Mi cuenta</span>
        </a>
        <a href="#" class="header-action" id="link-carrito">
          <span class="icon" aria-hidden="true">🛒</span>
          <span class="label">Carrito (<span id="cart-count">0</span>)</span>
        </a>
      </div>
    </div>

    <nav class="secondary-nav" aria-label="Navegación secundaria">
      <div class="secondary-nav__inner">
        <button class="secondary-nav__toggle" type="button" aria-expanded="false" aria-controls="secondary-nav-menu">
          <span class="secondary-nav__toggle-icon" aria-hidden="true">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect y="4" width="24" height="2.5" rx="1" fill="currentColor" />
              <rect y="11" width="24" height="2.5" rx="1" fill="currentColor" />
              <rect y="18" width="24" height="2.5" rx="1" fill="currentColor" />
            </svg>
          </span>
          <span class="secondary-nav__toggle-label">Categorías</span>
        </button>

        <ul class="secondary-nav__menu" id="secondary-nav-menu">
          <li class="nav-item nav-item--has-dropdown" data-menu="perfumes">
            <button class="nav-link" type="button" aria-haspopup="true" aria-expanded="false">
              Perfumes
              <span class="nav-link__icon" aria-hidden="true">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
            </button>
            <div class="dropdown-menu" role="menu">
              <ul class="dropdown-list">
                <li><a href="/productos?categoria=perfumes-masculinos" class="dropdown-link">Masculinas</a></li>
                <li><a href="/productos?categoria=perfumes-femeninos" class="dropdown-link">Femeninas</a></li>
              </ul>
            </div>
          </li>

          <li class="nav-item">
            <a href="#" class="nav-link nav-link--direct" data-href="/productos?categoria=vapes">
              Vapes
            </a>
          </li>

          <li class="nav-item nav-item--has-dropdown" data-menu="decants">
            <button class="nav-link" type="button" aria-haspopup="true" aria-expanded="false">
              Decants
              <span class="nav-link__icon" aria-hidden="true">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
            </button>
            <div class="dropdown-menu" role="menu">
              <ul class="dropdown-list">
                <li><a href="/productos?categoria=decants-masculinos" class="dropdown-link">Masculinas</a></li>
                <li><a href="/productos?categoria=decants-femeninos" class="dropdown-link">Femeninas</a></li>
                <li><a href="/productos?categoria=decants-combos" class="dropdown-link">Combos</a></li>
              </ul>
            </div>
          </li>

          <li class="nav-item nav-item--has-dropdown" data-menu="marcas">
            <button class="nav-link" type="button" aria-haspopup="true" aria-expanded="false">
              Marcas
              <span class="nav-link__icon" aria-hidden="true">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
            </button>
            <div class="dropdown-menu dropdown-menu--grid" role="menu">
              <div class="dropdown-section">
                <h4 class="dropdown-section__title">Perfumes</h4>
                <ul class="dropdown-list" data-brand-list="perfumes" aria-label="Marcas de perfumes">
                  <!-- JS insertará marcas -->
                </ul>
              </div>
              <div class="dropdown-section">
                <h4 class="dropdown-section__title">Vapes</h4>
                <ul class="dropdown-list" data-brand-list="vapes" aria-label="Marcas de vapes">
                  <!-- JS insertará marcas -->
                </ul>
              </div>
            </div>
          </li>

          <li class="nav-item">
            <a href="#" class="nav-link nav-link--direct" data-href="/productos?categoria=sale">
              SALE
            </a>
          </li>

          <li class="nav-item nav-item--has-dropdown" data-menu="faq">
            <button class="nav-link" type="button" aria-haspopup="true" aria-expanded="false">
              Preguntas Frecuentes
              <span class="nav-link__icon" aria-hidden="true">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
            </button>
            <div class="dropdown-menu" role="menu">
              <ul class="dropdown-list">
                <li>
                  <button class="dropdown-link dropdown-link--faq" type="button">
                    ¿Cuánto tarda el envío?
                  </button>
                </li>
                <li>
                  <button class="dropdown-link dropdown-link--faq" type="button">
                    ¿Qué es un decant?
                  </button>
                </li>
                <li>
                  <button class="dropdown-link dropdown-link--faq" type="button">
                    ¿Puedo pagar contra entrega?
                  </button>
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </div>
    </nav>

    <nav class="header-categories">
      <ul id="menu-categorias">
        <!-- JS insertará categorías desde la API -->
      </ul>
    </nav>
  </header>

  <!-- Hero / Carrusel -->
  <section class="hero">
    <div class="hero-content">
      <h1 id="hero-title">TECNOLOGÍA PREMIUM</h1>
      <p id="hero-subtitle">Los últimos gadgets y accesorios</p>
      <button id="hero-btn">Explorar</button>
    </div>
  </section>

  <!-- Beneficios fijos -->
  <section class="benefits">
    <div class="benefit">
      <h3>6 Cuotas sin interés</h3>
      <p>En compras superiores a $30.000</p>
    </div>
    <div class="benefit">
      <h3>Envíos a todo el país</h3>
      <p>Gratis en compras superiores a $50.000</p>
    </div>
    <div class="benefit">
      <h3>100% originales</h3>
      <p>Garantía de autenticidad en todos nuestros productos</p>
    </div>
    <div class="benefit">
      <h3>Descuentos hasta 30%</h3>
      <p>En efectivo y transferencia bancaria</p>
    </div>
  </section>

  <!-- Categorías dinámicas -->
  <section class="categories">
    <h2>Categorías</h2>
    <div id="category-list" class="category-container">
      <!-- JS insertará categorías dinámicamente -->
    </div>
  </section>

  <!-- Productos Destacados dinámicos -->
  <section class="featured-products">
    <h2>Productos Destacados</h2>
    <div id="product-list" class="product-list">
      <!-- JS insertará productos destacados dinámicamente -->
    </div>
    <button class="view-all">Ver Todos los Productos</button>
  </section>

  <!-- Newsletter -->
  <section class="newsletter">
    <h2>Suscríbete a nuestro newsletter</h2>
    <p>Recibe las últimas ofertas y novedades directamente en tu correo</p>
    <form id="newsletter-form">
      <input type="email" id="newsletter-email" placeholder="Tu correo electrónico" required>
      <button type="submit">Suscribirme</button>
    </form>
  </section>

  </div>

  <!-- Footer -->
  <footer class="main-footer">
    <div class="footer-inner">
      <div class="footer-info">
        <h3>Vesper</h3>
        <p>Tu tienda de confianza para fragancias premium, vapes y tecnología.</p>
      </div>
      <div class="footer-links">
        <h4>Productos</h4>
        <ul id="footer-categorias">
          <!-- JS insertará categorías en footer -->
        </ul>
      </div>
      <div class="footer-links">
        <h4>Atención al Cliente</h4>
        <ul>
          <li><a href="#">Preguntas Frecuentes</a></li>
          <li><a href="#">Términos y Condiciones</a></li>
          <li><a href="#">Política de Privacidad</a></li>
          <li><a href="#">Devoluciones</a></li>
          <li><a href="#">Garantía de Autenticidad</a></li>
        </ul>
      </div>
      <div class="footer-contact">
        <h4>Contacto</h4>
        <p>📧 info@vesper.com</p>
        <p>📞 +54 11 1234-5678</p>
        <p>📍 Buenos Aires, Argentina</p>
        <p>🕘 Lunes a Viernes 9:00 - 18:00</p>
        <p>🕑 Sábados 9:00 - 14:00</p>
      </div>
    </div>
  </footer>

  <!-- Script para cargar dinámicamente datos desde API -->
  <script>
    const header = document.querySelector('.main-header');
    const headerCategories = document.querySelector('.header-categories');

    const updateCategoriesHeight = () => {
      if (headerCategories) {
        headerCategories.style.setProperty('--categories-height', `${headerCategories.scrollHeight}px`);
      }
    };

    const renderCategorias = (categorias = []) => {
      const menu = document.getElementById("menu-categorias");
      const footer = document.getElementById("footer-categorias");
      const catList = document.getElementById("category-list");

      if (!menu || !footer || !catList) {
        updateCategoriesHeight();
        return;
      }

      menu.innerHTML = "";
      footer.innerHTML = "";
      catList.innerHTML = "";

      categorias.forEach(cat => {
        const { id, nombre, descripcion } = cat;
        const link = id ? `/categoria/${id}` : "#";

        const li = document.createElement("li");
        li.innerHTML = `<a href="${link}">${nombre}</a>`;
        menu.appendChild(li);

        const liFooter = document.createElement("li");
        liFooter.innerHTML = `<a href="${link}">${nombre}</a>`;
        footer.appendChild(liFooter);

        const div = document.createElement("div");
        div.classList.add("category");
        div.innerHTML = `<h3>${nombre}</h3><p>${descripcion || ""}</p>`;
        catList.appendChild(div);
      });

      updateCategoriesHeight();
    };

    const categoriasFallback = [
      { id: "fragancias", nombre: "Fragancias", descripcion: "Aromas para cada estilo." },
      { id: "descuentos", nombre: "Descuentos", descripcion: "Promociones imperdibles de la semana." },
      { id: "mujeres", nombre: "Mujeres", descripcion: "Fragancias y accesorios destacados." },
      { id: "hombres", nombre: "Hombres", descripcion: "Tecnología y fragancias para ellos." },
      { id: "accesorios", nombre: "Accesorios", descripcion: "Complementos ideales para tu día." },
      { id: "faq", nombre: "Preguntas frecuentes", descripcion: "Resolvé tus dudas al instante." }
    ];

    


    const marcasPlaceholder = {
      perfumes: ["Dior", "Chanel", "Yves Saint Laurent", "Tom Ford", "Carolina Herrera"],
      vapes: ["Smok", "Vaporesso", "GeekVape", "Voopoo", "UWELL"]
    };

    const populateBrandDropdown = (brands = {}) => {
      const perfumeList = document.querySelector('[data-brand-list="perfumes"]');
      const vapeList = document.querySelector('[data-brand-list="vapes"]');

      if (!perfumeList || !vapeList) {
        return;
      }

      const createBrandItem = (brand, type) => {
        const li = document.createElement('li');
        li.innerHTML = `<a class="dropdown-link" href="/productos?marca=${brand.toLowerCase().replace(/\s+/g, '-')}&segmento=${type}">${brand}</a>`;
        return li;
      };

      perfumeList.innerHTML = "";
      vapeList.innerHTML = "";

      (brands.perfumes || []).forEach(brand => {
        perfumeList.appendChild(createBrandItem(brand, 'perfumes'));
      });

      (brands.vapes || []).forEach(brand => {
        vapeList.appendChild(createBrandItem(brand, 'vapes'));
      });
    };

    const initSecondaryNavigation = () => {
      const secondaryNav = document.querySelector('.secondary-nav');
      if (!secondaryNav) {
        return;
      }

      const toggleButton = secondaryNav.querySelector('.secondary-nav__toggle');
      const menu = secondaryNav.querySelector('.secondary-nav__menu');
      const navItems = secondaryNav.querySelectorAll('.nav-item--has-dropdown');
      const directLinks = secondaryNav.querySelectorAll('.nav-link--direct');

      const toggleMenuVisibility = () => {
        if (!toggleButton || !menu) {
          return;
        }

        const isExpanded = toggleButton.getAttribute('aria-expanded') === 'true';
        toggleButton.setAttribute('aria-expanded', String(!isExpanded));
        menu.classList.toggle('secondary-nav__menu--open', !isExpanded);
      };

      if (toggleButton) {
        toggleButton.addEventListener('click', toggleMenuVisibility);
      }

      navItems.forEach(item => {
        const trigger = item.querySelector('.nav-link');
        if (!trigger) {
          return;
        }

        const openDropdown = () => {
          item.classList.add('is-open');
          trigger.setAttribute('aria-expanded', 'true');
        };

        const closeDropdown = () => {
          item.classList.remove('is-open');
          trigger.setAttribute('aria-expanded', 'false');
        };

        item.addEventListener('mouseenter', () => {
          if (window.innerWidth > 900) {
            openDropdown();
          }
        });

        item.addEventListener('mouseleave', () => {
          if (window.innerWidth > 900) {
            closeDropdown();
          }
        });

        trigger.addEventListener('focus', openDropdown);

        item.addEventListener('focusout', event => {
          if (!item.contains(event.relatedTarget)) {
            closeDropdown();
          }
        });

        trigger.addEventListener('click', event => {
          if (window.innerWidth <= 900) {
            event.preventDefault();
            const willOpen = !item.classList.contains('is-open');
            navItems.forEach(navItem => {
              if (navItem !== item) {
                navItem.classList.remove('is-open');
                const navTrigger = navItem.querySelector('.nav-link');
                if (navTrigger) {
                  navTrigger.setAttribute('aria-expanded', 'false');
                }
              }
            });
            item.classList.toggle('is-open', willOpen);
            trigger.setAttribute('aria-expanded', String(willOpen));
          }
        });
      });

      directLinks.forEach(link => {
        link.addEventListener('click', event => {
          event.preventDefault();
          const target = link.getAttribute('data-href');
          if (target) {
            window.location.href = target;
          }
        });
      });

      let lastScrollY = window.scrollY;

      const handleScroll = () => {
        const currentScroll = window.scrollY;

        if (currentScroll > lastScrollY && currentScroll > 120) {
          secondaryNav.classList.add('secondary-nav--hidden');
        } else {
          secondaryNav.classList.remove('secondary-nav--hidden');
        }

        if (header) {
          header.classList.toggle('header--scrolled', currentScroll > 40);
        }

        lastScrollY = currentScroll;
      };

      window.addEventListener('scroll', handleScroll, { passive: true });

      window.addEventListener('resize', () => {
        if (window.innerWidth > 900 && menu) {
          menu.classList.remove('secondary-nav__menu--open');
          if (toggleButton) {
            toggleButton.setAttribute('aria-expanded', 'false');
          }
        }

        navItems.forEach(item => {
          const trigger = item.querySelector('.nav-link');
          if (window.innerWidth > 900) {
            item.classList.remove('is-open');
            if (trigger) {
              trigger.setAttribute('aria-expanded', 'false');
            }
          }
        });
      });

      window.dispatchEvent(new Event('scroll'));
      updateCategoriesHeight();
    };

    const simulateBrandsFetch = () => {
      return new Promise(resolve => {
        setTimeout(() => {
          resolve(marcasPlaceholder);
        }, 350);
      });
    };

    document.addEventListener('DOMContentLoaded', async () => {
      renderCategorias(categoriasFallback);
      initSecondaryNavigation();
      populateBrandDropdown(await simulateBrandsFetch());
    });
  </script>
</body>
</html>
